<!-- å¯¼èˆªæ ç»„ä»¶ -->
<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
        <a class="navbar-brand" href="#">
            ğŸ¥ åŒ»é™¢é—¨è¯Šç®¡ç†ç³»ç»Ÿ
            <small class="ms-2 opacity-75" id="role-indicator">[è§’è‰²]</small>
        </a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto" id="main-nav">
                <!-- æ‚£è€…ç«¯å¯¼èˆª -->
                <li class="nav-item patient-nav">
                    <a class="nav-link" href="../patient/dashboard.html">æ‚£è€…é¦–é¡µ</a>
                </li>
                <li class="nav-item patient-nav">
                    <a class="nav-link" href="../patient/appointment.html">æŒ‚å·é¢„çº¦</a>
                </li>
                <li class="nav-item patient-nav">
                    <a class="nav-link" href="../patient/medical-records.html">å°±è¯Šè®°å½•</a>
                </li>
                <li class="nav-item patient-nav">
                    <a class="nav-link" href="../patient/profile.html">ä¸ªäººä¿¡æ¯</a>
                </li>
                
                <!-- ç®¡ç†å‘˜ç«¯å¯¼èˆª -->
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/dashboard.html">ç®¡ç†é¦–é¡µ</a>
                </li>
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/staff-management.html">èŒå·¥ç®¡ç†</a>
                </li>
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/department-management.html">ç§‘å®¤ç®¡ç†</a>
                </li>
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/medicine-management.html">è¯å“ç®¡ç†</a>
                </li>
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/finance-center.html">è´¢åŠ¡ä¸­å¿ƒ</a>
                </li>
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/on-site-registration.html">ç°åœºæŒ‚å·</a>
                </li>
                <li class="nav-item admin-nav">
                    <a class="nav-link" href="../admin/medicine-stock.html">è¯å“å…¥åº“</a>
                </li>
                
                <!-- åŒ»ç”Ÿç«¯å¯¼èˆª -->
                <li class="nav-item doctor-nav">
                    <a class="nav-link" href="../doctor/dashboard.html">åŒ»ç”Ÿé¦–é¡µ</a>
                </li>
                <li class="nav-item doctor-nav">
                    <a class="nav-link" href="../doctor/medical-record.html">ç”µå­ç—…å†</a>
                </li>
                <li class="nav-item doctor-nav">
                    <a class="nav-link" href="../doctor/prescription.html">å¼€å…·å¤„æ–¹</a>
                </li>
                
                <!-- è¯å‰‚å¸ˆç«¯å¯¼èˆª -->
                <li class="nav-item pharmacist-nav">
                    <a class="nav-link" href="../pharmacist/dashboard.html">è¯æˆ¿é¦–é¡µ</a>
                </li>
                <li class="nav-item pharmacist-nav">
                    <a class="nav-link" href="../pharmacist/inventory.html">åº“å­˜ç®¡ç†</a>
                </li>
            </ul>
            
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        ğŸ‘¤ <span id="user-name">ç”¨æˆ·</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="showMessage('ä¸ªäººè®¾ç½®åŠŸèƒ½å¼€å‘ä¸­', 'info')">ä¸ªäººè®¾ç½®</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item" href="#" onclick="switchRole('patient')">åˆ‡æ¢åˆ°æ‚£è€…è§†å›¾</a>
                            <a class="dropdown-item" href="#" onclick="switchRole('admin')">åˆ‡æ¢åˆ°ç®¡ç†å‘˜è§†å›¾</a>
                            <a class="dropdown-item" href="#" onclick="switchRole('doctor')">åˆ‡æ¢åˆ°åŒ»ç”Ÿè§†å›¾</a>
                            <a class="dropdown-item" href="#" onclick="switchRole('pharmacist')">åˆ‡æ¢åˆ°è¯å‰‚å¸ˆè§†å›¾</a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../patient/login.html">é€€å‡ºç™»å½•</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
    // æ ¹æ®å½“å‰é¡µé¢æ˜¾ç¤ºå¯¹åº”çš„å¯¼èˆªé¡¹
    function updateNavigation() {
        const isAdminPage = window.location.pathname.includes('/admin/');
        const isPatientPage = window.location.pathname.includes('/patient/');
        const isDoctorPage = window.location.pathname.includes('/doctor/');
        const isPharmacistPage = window.location.pathname.includes('/pharmacist/');
        
        if (isAdminPage) {
            document.querySelectorAll('.patient-nav, .doctor-nav, .pharmacist-nav').forEach(nav => nav.style.display = 'none');
            document.querySelectorAll('.admin-nav').forEach(nav => nav.style.display = 'block');
            document.getElementById('role-indicator').textContent = '[ç®¡ç†å‘˜]';
            document.getElementById('user-name').textContent = 'ç®¡ç†å‘˜';
        } else if (isPatientPage) {
            document.querySelectorAll('.admin-nav, .doctor-nav, .pharmacist-nav').forEach(nav => nav.style.display = 'none');
            document.querySelectorAll('.patient-nav').forEach(nav => nav.style.display = 'block');
            document.getElementById('role-indicator').textContent = '[æ‚£è€…]';
            document.getElementById('user-name').textContent = 'æ‚£è€…';
        } else if (isDoctorPage) {
            document.querySelectorAll('.patient-nav, .admin-nav, .pharmacist-nav').forEach(nav => nav.style.display = 'none');
            document.querySelectorAll('.doctor-nav').forEach(nav => nav.style.display = 'block');
            document.getElementById('role-indicator').textContent = '[åŒ»ç”Ÿ]';
            document.getElementById('user-name').textContent = 'åŒ»ç”Ÿ';
        } else if (isPharmacistPage) {
            document.querySelectorAll('.patient-nav, .admin-nav, .doctor-nav').forEach(nav => nav.style.display = 'none');
            document.querySelectorAll('.pharmacist-nav').forEach(nav => nav.style.display = 'block');
            document.getElementById('role-indicator').textContent = '[è¯å‰‚å¸ˆ]';
            document.getElementById('user-name').textContent = 'è¯å‰‚å¸ˆ';
        }
    }
    
    function switchRole(role) {
        if (role === 'patient') {
            window.location.href = '../patient/dashboard.html';
        } else if (role === 'admin') {
            window.location.href = '../admin/dashboard.html';
        } else if (role === 'doctor') {
            window.location.href = '../doctor/dashboard.html';
        } else if (role === 'pharmacist') {
            window.location.href = '../pharmacist/dashboard.html';
        }
    }
    
    // é¡µé¢åŠ è½½æ—¶æ›´æ–°å¯¼èˆª
    document.addEventListener('DOMContentLoaded', updateNavigation);
</script>